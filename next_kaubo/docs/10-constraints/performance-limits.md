# 性能约束（硬性红线）

违反这些约束需要修改约束文件本身，并记录原因。

> **注意**：当前实现为纯解释器，JIT和热重载尚未实现。以下约束分为：
> - ✅ **当前约束**：解释器已实现的性能目标
> - 🔮 **未来约束**：JIT/热重载阶段的目标（标记为*未来*）

## 运行时性能（解释器 - 当前）

| 场景 | 约束值 | 测量方式 | 优先级 | 状态 |
|------|--------|----------|--------|------|
| 解释器启动 | < 50ms | 到可执行第一条语句 | P1 | ✅ 当前目标 |
| 内存增长（长运行） | < 100MB/小时 | 无主动GC场景下 | P1 | ✅ 当前目标 |
| 单帧脚本耗时 | < 16ms（60fps） | 游戏场景典型脚本 | P2 | ✅ 当前目标 |

## 运行时性能（JIT - 未来*）

| 场景 | 约束值 | 测量方式 | 优先级 | 状态 |
|------|--------|----------|--------|------|
| JIT编译单函数 | < 100ms | 不含依赖函数的编译时间 | P0 | 🔮 Phase 4 |
| 热重载延迟 | < 1秒 | 从保存文件到状态恢复完成 | P0 | 🔮 Phase 5 |

## 编译期性能

| 场景 | 约束值 | 测量方式 | 优先级 | 状态 |
|------|--------|----------|--------|------|
| 全量编译（1000行） | < 2秒 | 冷启动完整编译 | P1 | ✅ 当前目标 |
| 语法检查反馈 | < 100ms | 输入时实时检查 | P1 | 📋 待实现 |
| 增量编译（单函数） | < 200ms | 修改后重新编译 | P0 | 🔮 增量解析后 |

## 调整记录

| 日期 | 调整内容 | 原因 |
|------|---------|------|
| （空） | | |

## 注释

- 这些约束针对**开发机器**（假设为现代桌面CPU）
- P0约束被违反时，必须停止功能开发，优先解决
- P1/P2约束可在必要时暂时放宽，但需记录技术债务
