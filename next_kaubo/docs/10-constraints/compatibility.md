# 兼容性约束（什么是稳定的）

明确什么不能轻易破坏，什么可以随意修改。

## 稳定契约（破坏需特别理由）

| 契约 | 说明 | 破坏条件 |
|------|------|---------|
| 语法文件格式 | `.kaubo`文件是纯文本UTF-8 | 需提供自动迁移工具 |
| 运行时状态序列化 | 热重载依赖的状态格式 | 必须支持旧版本状态的导入 |
| 错误消息格式 | 包含行号、列号、错误类型 | 工具链依赖时需协商 |

## 不稳定（可随意修改）

| 项目 | 说明 |
|------|------|
| 语法细节 | 关键字、语法糖、类型标注方式 |
| 标准库API | 函数名、参数顺序、行为 |
| 内部架构 | 模块划分、数据结构、算法 |
| 编译输出 | 字节码格式、JIT代码布局 |
| 配置文件格式 | CLI参数、配置文件（暂不提供）|

## 版本策略

- 无语义化版本（SemVer）
- 使用日期版本：`2025.02` 表示2025年2月版本
- 语法大改时，提供一次性迁移脚本

## 迁移承诺

当语法/架构发生破坏性变更时：

1. 提供迁移脚本或工具
2. 迁移时间成本不超过10分钟/1000行代码
3. 运行时状态尽量保留（允许丢失非关键状态）

## 调整记录

| 日期 | 调整内容 | 原因 |
|------|---------|------|
| （空） | | |
